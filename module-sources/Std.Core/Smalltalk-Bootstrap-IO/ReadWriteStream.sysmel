namespace Smalltalk definition: {

gcclass ReadWriteStream superclass: WriteStream; definition: {

    method contents := {
        readLimit := readLimit max: position.
        return: (collection copyWithSize: readLimit)
    }.

    method next := {
        position >= readLimit ifTrue: {
            nil
        } ifFalse: {
            position := position + 1u.
            collection at: position
        }
    }.

    method readStream
        := self.
}.

} ## End of namespace Smalltalk
